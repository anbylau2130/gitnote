
	<div class="article-header-box">
		<div class="article-header">
			<div class="article-title-box">
				<span class="article-type type-1 float-left">原</span>				<h1 class="title-article">IIS8部署Django项目</h1>
			</div>
			<div class="article-info-box">
				<div class="article-bar-top" style="height: 26px;">
																				<span class="time">2016年09月24日 01:12:26</span>
					<a class="follow-nickName" href="https://me.csdn.net/elonpage" target="_blank">杰明Jamin</a>
						<span class="read-count">阅读数：12071</span>
						
														<span class="tags-box artic-tag-box">
								<span class="label">标签：</span>
																<a data-track-click="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;django&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;django&quot;}" class="tag-link" href="http://so.csdn.net/so/search/s.do?q=django&amp;t=blog" target="_blank">django																</a><a data-track-click="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;iis&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;iis&quot;}" class="tag-link" href="http://so.csdn.net/so/search/s.do?q=iis&amp;t=blog" target="_blank">iis																</a><a data-track-click="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;python&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;python&quot;}" class="tag-link" href="http://so.csdn.net/so/search/s.do?q=python&amp;t=blog" target="_blank">python																</a><a data-track-click="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;windows server&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_626&quot;,&quot;con&quot;:&quot;windows server&quot;}" class="tag-link" href="http://so.csdn.net/so/search/s.do?q=windows server&amp;t=blog" target="_blank">windows server																</a>
							<span class="article_info_click">更多</span></span>
																					<div class="tags-box space">
								<span class="label">个人分类：</span>
																<a class="tag-link" href="https://blog.csdn.net/elonpage/article/category/6431284" target="_blank">Django																</a>
							</div>
																								</div>
				<div class="operating">
									</div>
			</div>
		</div>
	</div>
	<article class="baidu_pl">
		<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
                  					
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/elonpage/article/details/52645562				</div>
								<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css">
								            <div id="content_views" class="markdown_views prism-atom-one-dark">
							<!-- flowchart 箭头图标 勿删 -->
							<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
							<p class="">之前和同伴使用Django做了一个小网站，想将这个网站部署到真实的生产环境中，测试稳定性与可用性，于是租用了一个云服务器，并将Django部署到上面的IIS中。</p>



<h3 id="系统及软件版本" class=""><a name="t0"></a>系统及软件版本</h3>

<ul class="">
<li class=""><strong class="">Windows Server 2012 Standard</strong></li>
<li class=""><strong>IIS 8.0</strong></li>
<li><strong class="">Anaconda3 4.0.0 64位 （搭载python3.5.1）</strong></li>
<li class=""><strong>Django 1.10.1</strong></li>
</ul>



<h1 id="1-可运行的django网站" class=""><a name="t1"></a>1. 可运行的django网站</h1>

<p class="">首先确保自己的django网站在服务器上可以通过命令行 runserver 正常运行。 <br>
<img src="https://img-blog.csdn.net/20160923234056996" alt="请确保你的Django网站可以在服务器上单独运行哦！" title="" class=""></p>



<h1 id="2-iis配置"><a name="t2"></a>2. IIS配置</h1>



<h3 id="添加角色与功能"><a name="t3"></a>添加角色与功能</h3>

<ol>
<li>在服务器管理器中，添加角色与功能 <br>
<img src="https://img-blog.csdn.net/20160923232237770" alt="添加角色和功能" title=""></li>
<li>添加角色与功能，其中CGI组件必须安装。 <br>
<img src="https://img-blog.csdn.net/20160923232520754" alt="安装相应的功能" title=""></li>
</ol>



<h1 id="3-python安装wfastcgi模块"><a name="t4"></a>3. Python安装wfastcgi模块</h1>

<ol>
<li>在python的Scripts目录下pip安装wfastcgi模块（我之前已经安装过了，所以截图提示不需再次安装） <br>
<img src="https://img-blog.csdn.net/20160923233635673" alt="python安装wfastcgi模块" title=""></li>
</ol>



<h1 id="4-项目文件处理" class=""><a name="t5"></a>4. 项目文件处理</h1>

<ol>
<li><p class="">在python的Lib\site-packages目录下，找到wfastcgi.py文件，并将其复制到你的django项目根目录下。 <br>
<img src="https://img-blog.csdn.net/20160923234452825" alt="复制该文件" title=""> <br>
<img src="https://img-blog.csdn.net/20160923234554919" alt="将这个文件复制到项目根目录" title="" class=""></p></li>
<li><p>将项目文件放置到 C:\inetpub\wwwroot 目录下，方便管理，同时可以避免引起Windows Server的某些安全问题。 <br>
<img src="https://img-blog.csdn.net/20160923235451585" alt="这里写图片描述" title="" class=""></p></li>
</ol>



<h1 id="5-配置网站" class=""><a name="t6"></a>5. 配置网站</h1>

<ol class="">
<li><p>进入IIS管理器后，添加网站 <br>
<img src="https://img-blog.csdn.net/20160923235133625" alt="这里写图片描述" title="" class=""></p></li>
<li><p>填写相关参数 <br>
<img src="https://img-blog.csdn.net/20160923235651681" alt="这里写图片描述" title="" class=""></p></li>
<li><p class="">进入你建立的站点，选择处理程序映射。请注意，必须进入你指定的网站里面，再添加模块映射，否则，映射会添加到你所有的网站里。 <br>
<img src="https://img-blog.csdn.net/20160923235936393" alt="这里写图片描述" title="" class=""></p></li>
<li><p class="">添加模块映射。模块选择FastCgiModule，如果前面没有安装这个模块，请先安装哦。可执行文件对于本项目来说，实际上是必填的。此例中，C:\Anaconda3\python.exe|C:\inetpub\wwwroot\PowerX\wfastcgi.py。前面是python的路径，后面是wfastcgi.py文件的路径。实际上，如果wfastcgi.py文件路径直接引用python\Lib\site-packages目录下的文件也可以，不过就不可以部署多个Django网站了。 <br>
<img src="https://img-blog.csdn.net/20160924000357801" alt="这里写图片描述" title="" class=""></p></li>
<li><p>填写完参数后，选择请求控制，设置如图 <br>
<img src="https://img-blog.csdn.net/20160924001020056" alt="这里写图片描述" title=""></p></li>
<li><p>确认添加后，程序映射添加成功 <br>
<img src="https://img-blog.csdn.net/20160924001220543" alt="这里写图片描述" title=""></p></li>
<li><p>返回主页，进入FastCGI设置 <br>
<img src="https://img-blog.csdn.net/20160924001324057" alt="这里写图片描述" title=""></p></li>
<li><p>选中新建的FastCGI应用程序，修改环境变量 <br>
<img src="https://img-blog.csdn.net/20160924001638996" alt="这里写图片描述" title=""></p></li>
<li><p>需要添加的变量有3个：</p>

<ol><li><p>get_wsgi_application()方法的位置，C:\Anaconda3\Lib\site-packages\django\core\wsgi.py</p>

<ul><li><strong>Name: WSGI_HANDLER</strong> </li>
<li><strong>Value: django.core.wsgi.get_wsgi_application()</strong></li></ul></li>
<li><p>Django项目目录</p>

<ul><li><strong>Name: PYTHONPATH</strong> </li>
<li><strong>Value: C:\inetpub\wwwroot\PowerX</strong></li></ul></li>
<li><p>项目settings.py文件的位置</p>

<ul><li><strong>Name: DJANGO_SETTINGS_MODULE</strong> </li>
<li><strong>Value: powerx.settings</strong></li></ul></li></ol></li>
</ol>

<p>至此，一个不带static静态文件的Django项目就可以在服务器上运行啦！！！</p>



<h1 id="6-关于安全性"><a name="t7"></a>6. 关于安全性</h1>

<p>在Windows Server平台，网页上操作会转换成IIS用户对文件的操作。那么，如果该用户没有服务器上文件的修改权限，那么，就无法对数据库进行增删改的操作。所以，我们需要给IIS用户对该数据库所在文件夹的操作权限。（此处直接添加整个项目的权限，实际项目中，切勿这样做呀~~~） <br>
<img src="https://img-blog.csdn.net/20160924003927824" alt="这里写图片描述" title=""></p>



<h1 id="7-对于静态文件的处理"><a name="t8"></a>7. 对于静态文件的处理</h1>

<p>此处对静态文件的处理，是基于原项目已经支持静态文件的前提下进行的。如果在普通环境下尚不支持静态文件，请先在项目中设置好参数哦。</p>

<ol>
<li><p>在需要增加静态文件的地方，增加虚拟目录 <br>
<img src="https://img-blog.csdn.net/20160924004751885" alt="这里写图片描述" title=""></p></li>
<li><p class="">根据需求，可以添加多个指向不同位置的虚拟目录 <br>
<img src="https://img-blog.csdn.net/20160924004953242" alt="这里写图片描述" title=""></p></li>
</ol>

<p class="">至此，回应用池，回收一下或者重启应用。Django项目就可以在服务器上跑起来啦~~~~</p>            </div>
						<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet">
                      </div>
	</article>
